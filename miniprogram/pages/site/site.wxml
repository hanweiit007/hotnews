<!--pages/site/site.wxml-->
<view class="container">
  <!-- 站点信息卡片 -->
  <view class="site-card" wx:if="{{site}}">
    <view class="site-header">
      <view class="site-icon">{{site.icon}}</view>
      <view class="site-info">
        <view class="site-name">{{site.name}}</view>
        <view class="site-stats">
          <text class="stat-item">共{{siteStats.totalItems}}条</text>
          <text class="stat-item">平均热度{{siteStats.avgHotValue}}</text>
          <text class="stat-item">{{siteStats.updateFrequency}}更新</text>
        </view>
      </view>
    </view>
    <view class="site-actions">
      <view class="action-btn" bindtap="refreshData">
        <text class="action-icon">↻</text>
        <text>刷新</text>
      </view>
      <view class="action-btn" bindtap="shareSite">
        <text class="action-icon">↗</text>
        <text>分享</text>
      </view>
    </view>
  </view>

  <!-- 加载中提示 -->
  <view class="loading" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text>加载中...</text>
  </view>

  <!-- 热点列表 -->
  <view class="hot-items" wx:if="{{!isLoading && hotItems.length > 0}}">
    <view class="items-header">
      <text class="header-title">热点榜单</text>
      <text class="update-time">更新于 {{formatTime(lastUpdated)}}</text>
    </view>
    <view class="items-list">
      <view class="hot-item" 
            wx:for="{{hotItems}}" 
            wx:key="id"
            data-item="{{item}}"
            bindtap="handleItemClick">
        <view class="item-rank {{item.rank <= 3 ? 'top-' + item.rank : ''}}">{{item.rank}}</view>
        <view class="item-content">
          <view class="item-title">{{item.title}}</view>
          <view class="item-info">
            <text class="item-hot" wx:if="{{item.hot}}">{{item.hot}}</text>
            <text class="item-time">{{formatTime(item.publishTime)}}</text>
          </view>
          <view class="item-summary" wx:if="{{item.summary}}">{{item.summary}}</view>
        </view>
      </view>
    </view>
    <!-- 加载更多提示 -->
    <view class="load-more" wx:if="{{!showAllItems}}">
      <text>上拉加载更多</text>
    </view>
    <view class="load-more" wx:else>
      <text>没有更多数据了</text>
    </view>
  </view>

  <!-- 空状态提示 -->
  <view class="empty-state" wx:if="{{!isLoading && hotItems.length === 0}}">
    <text>暂无热点数据</text>
    <view class="refresh-btn" bindtap="refreshData">点击刷新</view>
  </view>
</view>